# 今日進度統整（2025/08/19）

## 版本管理
- **`v0.4` 已封存**：正確對應 SHA `31a3646` (*Inter OP struct*, 2025/08/14)。  
- **`v0.5` 已建立**：起始點 `5051b2b` (*Replace action type*, 2025/08/15)。  
- 今日更新屬於 **小版號修正**，後續可標記為 `v0.5.1`。

## 架構變更
1. **CombatState 分離**
   - `CombatState` 由 Node 剝離 → 純資料結構。
   - `CombatStateNode` 作為場景容器，暴露 `State`。

2. **接口清理**
   - 移除 `IActorLookup`。
   - 新增委派 `TryGetActorById`，降低耦合。
   - Translator 改以委派驗證目標 Actor。

3. **PhaseRunner / Pipeline 簽名簡化**
   - 移除 `ref CombatState`，改為直接傳 `CombatState`。
   - API 呼叫點更新，避免值傳參混淆。

4. **UI 與場景同步**
   - `Combat` 綁定改為 `CombatNode`。
   - 狀態檢查與 UI 綁定均調整為新架構。

## 清理與刪除
- 移除 **`IActorLookup.cs`**、**ActionType.cs (重定位至核心)**。
- `project.godot` 改名為 **Recall_Godot**，移除版本號耦合。  

## 代碼現況
- 已能成功執行戰鬥流程（`PhaseRunner.AdvanceUntilInput` 驗證通過）。
- Commit 統計：
  - **209 行新增**
  - **241 行刪除**
  - 淨簡化，結構更清晰。
